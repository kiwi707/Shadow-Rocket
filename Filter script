let customCharStart = "â—";  // è‡ªå®šä¹‰å­—ç¬¦ï¼Œæ”¾åœ¨æ ‡é¢˜å¼€å¤´
let customCharEnd = "áµ€á¶»";   // è‡ªå®šä¹‰å­—ç¬¦ï¼Œæ”¾åœ¨æ ‡é¢˜ç»“å°¾

// å¦‚æœæ ‡é¢˜ä¸åŒ…å«ä»¥ä¸‹å…³é”®è¯ï¼Œåˆ™è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†
if (!/å®˜ç½‘|è´¦å·|æœ‰æ•ˆæœŸ|ç¾¤|åˆ°æœŸ|åˆ·æ–°|ç”µæŠ¥|ä¼šå‘˜|è§£é”|æµé‡|è¶…æ—¶|è®¢é˜…|å»ºè®®|å…è´¹/i.test($server.title)) {

    // å»é™¤æ ‡é¢˜ä¸­ä¸éœ€è¦çš„å­—ç¬¦ã€è¯è¯­ä»¥åŠç‰¹å®šå­—ç¬¦
    $server.title = $server.title.replace(/æ™®é€š|ã€æ¨èã€‘|å›½å†…ä¸­è½¬|æ±Ÿè‹|è”é€š|ä¸­è½¬|å¹¿å·|ç§»åŠ¨|ä¸Šæµ·|\*|-|å¦é—¨|CF|[0-9]|_/g, '').slice(0).slice(0);
    
    // å°†æ ‡é¢˜ä¸­çš„'|'æ›¿æ¢ä¸ºç©ºæ ¼
    $server.title = $server.title.replace(/\|/g, ' ');

    let flag = 'ğŸŒ ';  // é»˜è®¤å›½æ——ç¬¦å·

    // æ ¹æ®æ ‡é¢˜ä¸­çš„å…³é”®è¯è®¾ç½®å›½æ——ç¬¦å·
    if (/ç¾å›½|ç¾åœ‹|US|æ´›æ‰çŸ¶|è¥¿é›…å›¾|States|American/.test($server.title)) {
        flag = 'ğŸ‡ºğŸ‡¸ ';  // ç¾å›½å›½æ——
    } else if (/æ—¥æœ¬|JP|Japan|ä¸œäº¬/.test($server.title)) {
        flag = 'ğŸ‡¯ğŸ‡µ ';  // æ—¥æœ¬å›½æ——
    } else if (/KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“/.test($server.title)) {
        flag = 'ğŸ‡°ğŸ‡· ';  // éŸ©å›½å›½æ——
    } else if (/å¾·å›½|DE|Frank/.test($server.title)) {
        flag = 'ğŸ‡©ğŸ‡ª ';  // å¾·å›½å›½æ——
    } else if (/IN|Mum/.test($server.title)) {
        flag = 'ğŸ‡®ğŸ‡³ ';  // å°åº¦å›½æ——
    } else if (/è‹±å›½|GB|London/.test($server.title)) {
        flag = 'ğŸ‡¬ğŸ‡§ ';  // è‹±å›½å›½æ——
    } else if (/å°|TW|Taiwan/.test($server.title)) {
        flag = 'ğŸ‡¨ğŸ‡³ ';  // å°æ¹¾åœ°åŒºï¼ˆæ­¤å¤„ç”¨äº†ä¸­å›½å›½æ——ï¼‰
    } else if (/æ¸¯|HK|Hong/.test($server.title)) {
        flag = 'ğŸ‡­ğŸ‡° ';  // é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºå›½æ——
    } else if (/æ–°åŠ å¡|ç‹®åŸ|SG|Singapore/.test($server.title)) {
        flag = 'ğŸ‡¸ğŸ‡¬ ';  // æ–°åŠ å¡å›½æ——
    } else if (/çˆ±å°”å…°|Dublin|IE/.test($server.title)) {
        flag = 'ğŸ‡®ğŸ‡ª ';  // çˆ±å°”å…°å›½æ——
    } else if (/SE|ç‘å…¸/.test($server.title)) {
        flag = 'ğŸ‡¸ğŸ‡ª ';  // ç‘å…¸å›½æ——
    } else if (/CA|åŠ æ‹¿å¤§|Mon/.test($server.title)) {
        flag = 'ğŸ‡¨ğŸ‡¦ ';  // åŠ æ‹¿å¤§å›½æ——
    } else if (/æ¾³å¤§åˆ©äºš|AU|Sydney/.test($server.title)) {
        flag = 'ğŸ‡¦ğŸ‡º ';  // æ¾³å¤§åˆ©äºšå›½æ——
    } else if (/åœŸè€³å…¶/.test($server.title)) {
        flag = 'ğŸ‡¹ğŸ‡· ';  // åœŸè€³å…¶å›½æ——
    } else if (/å·´é»|Paris|FR/.test($server.title)) {
        flag = 'ğŸ‡«ğŸ‡· ';  // æ³•å›½å›½æ——
    } else if (/æ¾³é—¨/.test($server.title)) {
        flag = 'ğŸ‡²ğŸ‡´ ';  // æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒºå›½æ——
    }

    // å°†è‡ªå®šä¹‰å­—ç¬¦æ”¾åœ¨æ ‡é¢˜çš„å¼€å¤´
    $server.title = customCharStart + $server.title;
    
    // å°†å›½æ——ç¬¦å·æ”¾åœ¨æ ‡é¢˜çš„å¼€å¤´ï¼Œå¹¶å°†è‡ªå®šä¹‰å­—ç¬¦æ”¾åœ¨æ ‡é¢˜çš„ç»“å°¾
    $server.title = flag + $server.title + customCharEnd;

    // å…¨å±€æ˜ å°„å¯¹è±¡ï¼Œç”¨äºè·Ÿè¸ªæ ‡é¢˜é‡å¤æƒ…å†µ
    const map = globalThis.map || (globalThis.map = {});

    // å¦‚æœæ ‡é¢˜æ²¡æœ‰é‡å¤ï¼Œå­˜å‚¨åˆ°æ˜ å°„å¯¹è±¡ä¸­
    if (!map[$server.title]) {
        map[$server.title] = 1;
    } else {
        // å¦‚æœæ ‡é¢˜é‡å¤ï¼Œå¢åŠ ç´¢å¼•å¹¶æ›´æ–°æ ‡é¢˜
        const idx = ++map[$server.title];
        $server.title = `${$server.title} - ${idx}`;
    }

    return true;  // å¤„ç†æˆåŠŸ
}

return false;  // å¦‚æœæ ‡é¢˜åŒ…å«å…³é”®è¯ï¼Œåˆ™ä¸å¤„ç†